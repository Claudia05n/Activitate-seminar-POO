#include<iostream>
#include<string>

using namespace std;
enum Specializare { INFORMATICA = 1, AUTOMATICA = 2, CIBERNETICA = 3 };

class Student {
private:
	const int matricol;
	string nume;
	float medie;
	Specializare spec;
	int nrNote;
	float* note;
	static int nrTotalStudenti;
public:
	Student() :matricol(++nrTotalStudenti) {
		this->nume = "Anonim";
		this->medie = 0;
		this->nrNote = 0;
		this->note = nullptr;
		this->spec = INFORMATICA;
	}

	Student(string nume, float medie, int nrNote, float* noteSursa, Specializare spec) :matricol(++nrTotalStudenti) {
		this->nume = nume;
		this->medie = medie;
		this->nrNote = nrNote;
		this->note = new float[this->nrNote];
		for (int i = 0; i < this->nrNote; i++) {
			this->note[i] = noteSursa[i];
		}
		this->spec = spec;
		delete[] noteSursa;
	}

	void afisareStudent() {
		cout << endl << this->matricol << ". Studentul " << this->nume
			<< " la spec. ";
		if (this->spec == INFORMATICA) cout << "INFO";
		if (this->spec == AUTOMATICA) cout << "AUTO";
		if (this->spec == CIBERNETICA) cout << "CIBER";

		cout << " are media " << this->medie << " si " << this->nrNote << " note: ";
		if (this->note != nullptr) {
			for (int i = 0; i < this->nrNote - 1; i++) {
				cout << this->note[i] << ", ";
			}
			cout << this->note[this->nrNote - 1] << ".";
		}
	}

	int getNrNote() {
		return this->nrNote;
	}

	void setNrNote(int nrNoteNou) {
		if (nrNoteNou > 0) {
			this->nrNote = nrNoteNou;
		}
		else {
			throw "Numar de note invalid";
		}
	}

	float* getNote() {
		float* copieNote = new float[this->nrNote];
		for (int i = 0; i < this->nrNote; i++) {
			copieNote[i] = this->note[i];
		}
		return copieNote;
	}

	void setNote(float* noteNoi, int nrNoteNou) {
		setNrNote(nrNoteNou);

		if (this->note != nullptr) {
			delete[] this->note;
		}
		this->note = new float[this->nrNote];
		for (int i = 0; i < this->nrNote; i++) {
			this->note[i] = noteNoi[i];
		}
		delete[] noteNoi;
	}

	~Student() {
		if (this->note != nullptr) {
			delete[] this->note;
		}
	}
};

int Student::nrTotalStudenti = 0;

void main() {
	Student s1;
	float* note = new float[3] {9, 8.5, 10};
	Student* s2 = new Student("Ionescu", 9, 3, note, AUTOMATICA);

	s2->afisareStudent();

	try {
		s2->setNrNote(4);
		s2->setNrNote(-1);
	}
	catch (const char* mesaj) {
		cout << endl << "Eroare: " << mesaj;
	}

	delete s2;
}
